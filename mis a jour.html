<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mon Budget Personnel Kawaii</title>
    
    <!-- FIX POUR LE PROBL√àME DE "ROOT" : D√©finit le r√©pertoire actuel comme la base pour les chemins relatifs. -->
    <base href="./"> 
    
    <!-- Chargement de Tailwind CSS pour un style moderne et adaptatif -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #faf5ff; /* Lavande pastel tr√®s clair */
        }
        .transaction-card {
            transition: all 0.3s ease;
            border-radius: 1rem; /* Bords plus ronds */
        }
        .transaction-card:hover {
            box-shadow: 0 6px 16px rgba(249, 168, 212, 0.3); /* Ombre rose douce */
            transform: translateY(-3px);
        }
        /* Couleurs Th√®me Kawaii */
        .income {
            border-left-color: #a7f3d0; /* Vert menthe pastel (Emerald 200) */
        }
        .expense {
            border-left-color: #fda4af; /* Rose framboise pastel (Rose 300) */
        }
        .balance-positive {
            color: #10b981; /* Vert, gard√© fort pour la clart√© financi√®re */
        }
        .balance-negative {
            color: #ef4444; /* Rouge, gard√© fort pour la clart√© financi√®re */
        }
        /* Style pour l'indicateur de chargement */
        #loading-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #faf5ff;
        }
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #f9a8d4; /* Rose pastel */
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
    <script>
        // --- Stockage Local (Remplacement de Firebase) ---
        const STORAGE_KEY = 'kawaiiBudgetTransactions';
        let transactions = [];

        // Fonction pour charger les transactions depuis le stockage local
        const loadLocalTransactions = () => {
            try {
                const storedData = localStorage.getItem(STORAGE_KEY);
                if (storedData) {
                    // Assurez-vous que les donn√©es sont bien un tableau, sinon initialisez-le
                    const parsedData = JSON.parse(storedData);
                    transactions = Array.isArray(parsedData) 
                        ? parsedData.sort((a, b) => b.createdAt - a.createdAt) 
                        : [];
                } else {
                    transactions = [];
                }
            } catch (e) {
                console.error("Erreur lors du chargement des transactions locales:", e);
                transactions = [];
                showCustomAlert("Erreur de Chargement", "Impossible de lire les donn√©es sauvegard√©es. La liste a √©t√© r√©initialis√©e.");
            }
            
            // Calculer le solde et rendre l'UI
            calculateAndRender();
        };

        // Fonction pour sauvegarder les transactions dans le stockage local
        const saveLocalTransactions = () => {
            try {
                // Sauvegarder les transactions
                localStorage.setItem(STORAGE_KEY, JSON.stringify(transactions));
            } catch (e) {
                console.error("Erreur lors de la sauvegarde des transactions locales:", e);
                showCustomAlert("Erreur de sauvegarde", "Impossible de sauvegarder les donn√©es sur le t√©l√©phone. Espace de stockage plein ou probl√®me de navigateur.");
            }
            calculateAndRender();
        };


        // Fonction pour calculer les totaux et mettre √† jour l'affichage
        const calculateAndRender = () => {
            let totalIncome = 0;
            let totalExpense = 0;

            transactions.forEach(tx => {
                // Assurer que le montant est un nombre
                const amount = Number(tx.amount) || 0; 
                if (tx.type === 'income') {
                    totalIncome += amount;
                } else if (tx.type === 'expense') {
                    totalExpense += amount;
                }
            });
            
            renderTransactions(transactions, totalIncome, totalExpense);
        }

        // --- Fonctions d'aide UI ---

        const showApp = () => {
            document.getElementById('loading-indicator').style.display = 'none';
            document.getElementById('app-content').classList.remove('hidden');
        };

        // Fonction pour formater le montant en devise (Euro)
        const formatCurrency = (amount) => {
            return new Intl.NumberFormat('fr-FR', {
                style: 'currency',
                currency: 'EUR'
            }).format(amount);
        };

        // --- Op√©rations CRUD Locales ---

        const addTransaction = (description, amount, type) => {
            if (!description.trim() || !amount || amount <= 0) return;

            const newTransaction = {
                id: crypto.randomUUID(), // Utiliser un ID unique local
                description: description.trim(),
                amount: amount, 
                type: type, 
                createdAt: Date.now() // Timestamp actuel
            };
            
            transactions.unshift(newTransaction); // Ajouter au d√©but pour l'ordre
            
            // Vider le formulaire apr√®s succ√®s
            document.getElementById('new-transaction-form').reset();
            
            saveLocalTransactions(); // Sauvegarder
        };

        const deleteTransaction = (id) => {
            showCustomConfirm('Confirmer la suppression', '√ätes-vous s√ªr de vouloir supprimer cette transaction ?', () => {
                // Filtrer pour retirer la transaction correspondante
                const initialLength = transactions.length;
                transactions = transactions.filter(tx => tx.id !== id);
                
                if (transactions.length < initialLength) {
                    saveLocalTransactions(); // Sauvegarder si suppression r√©ussie
                }
            });
        };

        // --- Fonctions d'Exportation/Importation (Sauvegarde Cloud Manuelle) ---
        
        const exportTransactionsToJSON = () => {
            if (transactions.length === 0) {
                showCustomAlert("Exportation", "Il n'y a aucune transaction √† exporter.");
                return;
            }

            // G√©n√©rer le contenu JSON
            const dataStr = JSON.stringify(transactions, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            // Cr√©er un nom de fichier horodat√©
            const date = new Date().toISOString().slice(0, 10); // Format YYYY-MM-DD
            const fileName = `budget_backup_${date}.json`;
            
            // Cr√©er un lien temporaire pour le t√©l√©chargement
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', fileName);
            linkElement.click();
            
            showCustomAlert("Exportation R√©ussie", `Le fichier "${fileName}" a √©t√© t√©l√©charg√©. Stockez-le dans votre cloud !`);
        };
        
        const triggerImport = () => {
            // Clic sur l'√©l√©ment input file cach√©
            document.getElementById('import-file-input').click();
        };

        const handleImportFile = (event) => {
            const file = event.target.files[0];
            if (!file) return;

            if (file.type !== "application/json") {
                showCustomAlert("Erreur d'Importation", "Veuillez s√©lectionner un fichier JSON valide.");
                return;
            }

            const reader = new FileReader();
            reader.onload = (e) => {
                try {
                    const importedData = JSON.parse(e.target.result);
                    
                    if (!Array.isArray(importedData)) {
                        throw new Error("Le fichier ne contient pas de tableau de transactions valide.");
                    }

                    // Validation de s√©curit√© : v√©rifie la structure de chaque transaction
                    const isValidTransaction = (tx) => {
                        return tx.id && 
                               typeof tx.description === 'string' && 
                               typeof tx.amount === 'number' && tx.amount > 0 &&
                               (tx.type === 'income' || tx.type === 'expense');
                    };
                    
                    // Filtrer pour garder uniquement les transactions valides
                    const validatedData = importedData.filter(isValidTransaction);

                    if (validatedData.length !== importedData.length) {
                         // Avertir l'utilisateur si des donn√©es ont √©t√© nettoy√©es
                         showCustomAlert("Avertissement d'Importation", `Certaines transactions corrompues ont √©t√© filtr√©es (${importedData.length - validatedData.length} supprim√©es). Seules les transactions valides ont √©t√© import√©es.`);
                    }
                    
                    if (validatedData.length === 0 && importedData.length > 0) {
                        throw new Error("Aucune transaction valide trouv√©e dans le fichier.");
                    }
                    
                    showCustomConfirm(
                        'Confirmer l\'Importation', 
                        `L'importation va √âCRASER toutes les transactions actuelles (${validatedData.length} transactions trouv√©es). Voulez-vous continuer ?`, 
                        () => {
                            // Remplacer les transactions actuelles
                            transactions = validatedData.map(tx => ({
                                ...tx,
                                // S'assurer que les dates sont des nombres pour le tri
                                createdAt: Number(tx.createdAt) 
                            }));
                            saveLocalTransactions();
                            showCustomAlert("Importation R√©ussie", "Vos transactions ont √©t√© restaur√©es depuis le fichier.");
                        }
                    );

                } catch (error) {
                    console.error("Erreur lors du traitement du fichier JSON:", error);
                    showCustomAlert("Erreur d'Importation", `Impossible de lire ou de traiter le fichier : ${error.message}`);
                }
            };
            
            reader.readAsText(file);
            
            // R√©initialiser la valeur de l'input pour permettre l'importation du m√™me fichier √† nouveau
            event.target.value = null; 
        };
        
        // --- Rendu de l'UI ---
        
        const renderTransactions = (transactionsToRender, totalIncome, totalExpense) => {
            const list = document.getElementById('transaction-list');
            list.innerHTML = ''; // Vider la liste actuelle

            const balance = totalIncome - totalExpense;
            const balanceClass = balance >= 0 ? 'balance-positive' : 'balance-negative'; 

            // Mettre √† jour la carte de r√©sum√©
            document.getElementById('total-income').textContent = formatCurrency(totalIncome);
            document.getElementById('total-expense').textContent = formatCurrency(totalExpense);
            document.getElementById('total-balance').textContent = formatCurrency(balance);
            document.getElementById('total-balance').className = `text-3xl font-bold ${balanceClass}`;


            if (transactionsToRender.length === 0) {
                list.innerHTML = '<p class="text-center text-gray-500 py-8">Aucune transaction enregistr√©e. Ajoutez-en une nouvelle !</p>';
                return;
            }

            transactionsToRender.forEach(tx => {
                const li = document.createElement('li');
                const isIncome = tx.type === 'income';
                const sign = isIncome ? '+' : '-';
                const colorClass = isIncome ? 'income' : 'expense';
                
                // Classes de style Tailwind
                li.className = `transaction-card flex items-center justify-between p-4 mb-3 bg-white rounded-xl shadow-md border-l-4 ${colorClass}`;
                
                li.innerHTML = `
                    <div class="flex flex-col flex-1 min-w-0">
                        <span class="text-lg font-medium text-gray-800 break-words pr-4">
                            ${tx.description}
                        </span>
                        <span class="text-sm text-gray-500">
                            ${isIncome ? 'Revenu' : 'D√©pense'}
                        </span>
                    </div>

                    <div class="flex items-center space-x-4">
                        <!-- Montant : Utilisation de couleurs mignonnes pour les transactions individuelles -->
                        <span class="text-xl font-bold ${isIncome ? 'text-emerald-500' : 'text-rose-500'}">
                            ${sign} ${formatCurrency(tx.amount)}
                        </span>
                        
                        <!-- Bouton de suppression -->
                        <button class="text-rose-300 hover:text-rose-500 p-2 rounded-full transition-colors duration-200 focus:outline-none"
                                onclick="window.deleteTransaction('${tx.id}')">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                            </svg>
                        </button>
                    </div>
                `;
                list.appendChild(li);
            });
        };

        // --- Gestion des √©v√©nements et UI personnalis√©e (pas d'alertes) ---

        const handleAddTransaction = (event) => {
            event.preventDefault(); // Emp√™che l'envoi du formulaire
            const descriptionInput = document.getElementById('description-input');
            const amountInput = document.getElementById('amount-input');
            const typeInput = document.querySelector('input[name="transaction-type"]:checked');

            const description = descriptionInput.value;
            const amount = parseFloat(amountInput.value); // Utiliser float pour les montants
            const type = typeInput ? typeInput.value : 'expense'; // D√©pense par d√©faut

            if (description.trim() === "" || isNaN(amount) || amount <= 0) {
                 // FIX 1.1: Fournir un retour visuel clair √† l'utilisateur au lieu de l'√©chec silencieux
                 showCustomAlert("Erreur de Saisie", "Veuillez entrer une description non vide et un montant valide (sup√©rieur √† 0,01 ‚Ç¨).");
                 return;
            }

            addTransaction(description, amount, type);
        };
        
        // Fonction pour afficher un message d'alerte simple
        const showCustomAlert = (title, message) => {
            const modal = document.getElementById('custom-confirm-modal');
            const modalTitle = document.getElementById('confirm-title');
            const modalMessage = document.getElementById('confirm-message');
            const confirmBtn = document.getElementById('confirm-yes-btn');
            const cancelBtn = document.getElementById('confirm-no-btn');
            
            modalTitle.textContent = title;
            modalMessage.textContent = message;
            
            confirmBtn.textContent = "OK";
            confirmBtn.classList.remove('bg-rose-400', 'hover:bg-rose-500');
            confirmBtn.classList.add('bg-pink-400', 'hover:bg-pink-500');
            cancelBtn.classList.add('hidden');
            
            const close = () => {
                modal.classList.add('hidden');
                confirmBtn.removeEventListener('click', handleClose);
                confirmBtn.textContent = "Confirmer";
                confirmBtn.classList.remove('bg-pink-400', 'hover:bg-pink-500');
                confirmBtn.classList.add('bg-rose-400', 'hover:bg-rose-500');
                cancelBtn.classList.remove('hidden');
            };

            const handleClose = () => {
                close();
            };

            confirmBtn.addEventListener('click', handleClose);
            
            modal.onclick = (e) => {
                if (e.target === modal) {
                    close();
                }
            };

            modal.classList.remove('hidden');
        };

        // Afficher un modal de confirmation personnalis√© (au lieu de confirm())
        const showCustomConfirm = (title, message, callback) => {
            const modal = document.getElementById('custom-confirm-modal');
            const modalTitle = document.getElementById('confirm-title');
            const modalMessage = document.getElementById('confirm-message');
            const confirmBtn = document.getElementById('confirm-yes-btn');
            const cancelBtn = document.getElementById('confirm-no-btn');
            
            confirmBtn.textContent = "Confirmer";
            confirmBtn.classList.remove('bg-pink-400', 'hover:bg-pink-500');
            confirmBtn.classList.add('bg-rose-400', 'hover:bg-rose-500');
            cancelBtn.classList.remove('hidden');

            modalTitle.textContent = title;
            modalMessage.textContent = message;
            
            const close = () => {
                modal.classList.add('hidden');
                confirmBtn.removeEventListener('click', handleConfirm);
                cancelBtn.removeEventListener('click', close); // Enl√®ve l'√©couteur ici aussi
            };

            const handleConfirm = () => {
                callback();
                close();
            };

            confirmBtn.addEventListener('click', handleConfirm);
            cancelBtn.addEventListener('click', close);
            
            modal.onclick = (e) => {
                if (e.target === modal) {
                    close();
                }
            };

            modal.classList.remove('hidden');
        };

        // Rendre les fonctions globales pour qu'elles soient appelables depuis les boutons HTML
        window.deleteTransaction = deleteTransaction;
        window.showCustomConfirm = showCustomConfirm;
        window.showCustomAlert = showCustomAlert; 
        window.exportTransactionsToJSON = exportTransactionsToJSON; // Nouvelle fonction globale
        window.triggerImport = triggerImport; // Nouvelle fonction globale pour l'importation

        // Fonction d'initialisation de l'application (au lieu de Firebase)
        const initializeApp = () => {
            // 1. Charger les transactions locales
            loadLocalTransactions(); 
            // 2. Afficher l'application
            showApp();
        };

        window.onload = () => {
            // Attacher l'√©couteur d'√©v√©nement au formulaire
            document.getElementById('new-transaction-form').addEventListener('submit', handleAddTransaction);
            
            // Attacher l'√©couteur d'√©v√©nement pour l'importation
            document.getElementById('import-file-input').addEventListener('change', handleImportFile);

            // Cacher le contenu de l'application au d√©but
            document.getElementById('app-content').classList.add('hidden');
            document.getElementById('loading-indicator').style.display = 'flex';
            
            // D√©marrer l'application
            initializeApp();
        };

    </script>
</head>
<body>
    
    <!-- ---------------------------------------------------- -->
    <!-- Indicateur de Chargement (Visible par d√©faut) -->
    <!-- ---------------------------------------------------- -->
    <div id="loading-indicator" class="fixed inset-0 z-50">
        <div class="flex flex-col items-center justify-center h-full">
            <div class="spinner"></div>
            <p id="loading-text" class="mt-4 text-pink-500 font-semibold">Chargement des donn√©es locales...</p>
        </div>
    </div>
    
    <!-- ---------------------------------------------------- -->
    <!-- Contenu Principal de l'Application -->
    <!-- ---------------------------------------------------- -->
    <div id="app-content" class="min-h-screen p-4 sm:p-8">
        <div class="max-w-3xl mx-auto">
            
            <header class="text-center mb-8">
                <h1 class="text-4xl font-extrabold text-gray-800">Mon Budget Kawaii</h1>
                <p class="text-sm mt-2 p-2 bg-purple-100 text-purple-700 rounded-lg font-semibold">
                    üíæ Mode Local : Les donn√©es sont sauvegard√©es uniquement sur votre t√©l√©phone.
                </p>
            </header>
            
            <!-- ---------------------------------------------- -->
            <!-- Tableau de Bord du Solde -->
            <!-- ---------------------------------------------- -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8 mt-4">
                <!-- Solde Total -->
                <div class="bg-white p-6 rounded-xl shadow-lg text-center md:col-span-1">
                    <p class="text-lg text-gray-500">Solde Total</p>
                    <p id="total-balance" class="text-3xl font-bold text-gray-800 mt-2">0,00 ‚Ç¨</p>
                </div>
                <!-- Total Revenus -->
                <div class="bg-white p-6 rounded-xl shadow-lg text-center">
                    <p class="text-lg text-gray-500">Revenus</p>
                    <p id="total-income" class="text-3xl font-bold text-emerald-500 mt-2">0,00 ‚Ç¨</p>
                </div>
                <!-- Total D√©penses -->
                <div class="bg-white p-6 rounded-xl shadow-lg text-center">
                    <p class="text-lg text-gray-500">D√©penses</p>
                    <p id="total-expense" class="text-3xl font-bold text-rose-500 mt-2">0,00 ‚Ç¨</p>
                </div>
            </div>

            <!-- ---------------------------------------------- -->
            <!-- Formulaire d'Ajout de Transaction -->
            <!-- ---------------------------------------------- -->
            <div class="mb-8 bg-white p-6 rounded-xl shadow-lg border-t-4 border-pink-400">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4">Nouvelle Transaction</h2>
                <form id="new-transaction-form" class="space-y-4">
                    
                    <!-- Ligne 1: Description et Montant -->
                    <div class="flex flex-col sm:flex-row gap-4">
                        <input type="text" id="description-input" placeholder="Description (ex: Achat de jeu, Argent de poche)" required
                            class="flex-1 p-3 border-2 border-gray-300 rounded-lg focus:border-pink-400 focus:ring-1 focus:ring-pink-400 transition duration-150">
                        
                        <input type="number" id="amount-input" placeholder="Montant (‚Ç¨)" required min="0.01" step="0.01"
                            class="w-full sm:w-1/3 p-3 border-2 border-gray-300 rounded-lg focus:border-pink-400 focus:ring-1 focus:ring-pink-400 transition duration-150 text-right">
                    </div>
                    
                    <!-- Ligne 2: Type de Transaction -->
                    <div class="flex justify-between items-center bg-purple-50 p-3 rounded-lg border border-purple-200">
                        <span class="text-gray-700 font-medium">Type :</span>
                        <div class="flex space-x-6">
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="radio" name="transaction-type" value="income" checked
                                    class="h-5 w-5 text-emerald-500 focus:ring-emerald-500 border-gray-300">
                                <span class="text-emerald-500 font-semibold">Revenu (+)</span>
                            </label>
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="radio" name="transaction-type" value="expense"
                                    class="h-5 w-5 text-rose-500 focus:ring-rose-500 border-gray-300">
                                <span class="text-rose-500 font-semibold">D√©pense (-)</span>
                            </label>
                        </div>
                    </div>

                    <!-- Bouton Ajouter -->
                    <button type="submit"
                            class="w-full bg-pink-400 hover:bg-pink-500 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-200 ease-in-out transform hover:scale-[1.01] focus:outline-none focus:ring-4 focus:ring-pink-400 focus:ring-opacity-50">
                        Enregistrer la Transaction
                    </button>
                </form>
            </div>
            
            <!-- ---------------------------------------------- -->
            <!-- Sauvegarde Cloud Manuelle (Export/Import) -->
            <!-- ---------------------------------------------- -->
            <div class="mb-8 bg-white p-6 rounded-xl shadow-lg border-t-4 border-purple-400">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4">Sauvegarde & Restauration</h2>
                <p class="text-sm text-gray-500 mb-4">
                    Utilisez ces boutons pour sauvegarder manuellement vos donn√©es dans le cloud (en t√©l√©chargeant un fichier JSON) ou pour restaurer vos donn√©es depuis un fichier.
                </p>
                <div class="flex flex-col sm:flex-row gap-3">
                    <button onclick="window.exportTransactionsToJSON()"
                            class="flex-1 flex items-center justify-center space-x-2 bg-emerald-400 hover:bg-emerald-500 text-white font-bold py-3 px-4 rounded-lg shadow-md transition duration-200">
                        <!-- Ic√¥ne de t√©l√©chargement -->
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                          <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L10 11.586l2.293-2.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" />
                          <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v7a1 1 0 11-2 0V4a1 1 0 011-1z" clip-rule="evenodd" />
                        </svg>
                        <span>Exporter vers Fichier (.json)</span>
                    </button>
                    
                    <!-- Input cach√© pour le fichier d'importation -->
                    <input type="file" id="import-file-input" accept=".json" class="hidden">
                    
                    <button onclick="window.triggerImport()"
                            class="flex-1 flex items-center justify-center space-x-2 bg-sky-400 hover:bg-sky-500 text-white font-bold py-3 px-4 rounded-lg shadow-md transition duration-200">
                        <!-- Ic√¥ne de t√©l√©chargement (pour l'importation) -->
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                          <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-9.707a1 1 0 011.414 0L10 9.586l2.293-2.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" />
                          <path fill-rule="evenodd" d="M10 4a1 1 0 011 1v4a1 1 0 11-2 0V5a1 1 0 011-1z" clip-rule="evenodd" />
                        </svg>
                        <span>Importer depuis Fichier (.json)</span>
                    </button>
                </div>
            </div>


            <!-- ---------------------------------------------- -->
            <!-- Liste des Transactions -->
            <!-- ---------------------------------------------- -->
            <h2 class="text-2xl font-semibold text-gray-800 mb-4">Historique</h2>
            <ul id="transaction-list" class="space-y-4">
                <!-- Les transactions seront ins√©r√©es ici par JavaScript -->
            </ul>

        </div>
    </div>
    
    <!-- ---------------------------------------------------- -->
    <!-- Modal de Confirmation Personnalis√© -->
    <!-- ---------------------------------------------------- -->
    <div id="custom-confirm-modal" class="hidden fixed inset-0 bg-gray-900 bg-opacity-75 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl max-w-sm w-full p-6 transform transition-all duration-300 scale-100">
            <h3 id="confirm-title" class="text-xl font-bold text-gray-800 mb-4">Confirmation</h3>
            <p id="confirm-message" class="text-gray-600 mb-6">√ätes-vous s√ªr de vouloir continuer ?</p>
            <div class="flex justify-end space-x-3">
                <button id="confirm-no-btn" class="px-4 py-2 bg-purple-100 text-purple-700 font-semibold rounded-lg hover:bg-purple-200 transition-colors">
                    Annuler
                </button>
                <button id="confirm-yes-btn" class="px-4 py-2 bg-rose-400 text-white font-semibold rounded-lg hover:bg-rose-500 transition-colors">
                    Confirmer
                </button>
            </div>
        </div>
    </div>
</body>
</html>
